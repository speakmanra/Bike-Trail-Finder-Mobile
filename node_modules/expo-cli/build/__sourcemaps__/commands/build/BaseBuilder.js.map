{"version":3,"sources":["commands/build/BaseBuilder.js"],"names":["secondsToMilliseconds","seconds","BaseBuilder","constructor","projectDir","options","wait","clearCredentials","releaseChannel","publish","command","prepareProjectInfo","run","e","BuildError","log","error","message","process","exit","commandCheckStatus","checkStatus","exp","ProjectUtils","readConfigJsonAsync","manifest","user","UserManager","ensureLoggedInAsync","checkProjectConfig","isDetached","platform","oldestSupportedMajorVersion","Versions","oldestSupportedMajorVersionAsync","semver","major","sdkVersion","version","newestSdkVersionAsync","warn","chalk","bold","checkForBuildInProgress","buildStatus","Project","buildAsync","mode","current","publicUrl","jobs","length","err","Error","logBuildStatuses","checkStatusBeforeBuild","reuseStatus","findReusableBuildAsync","slug","canReuse","underline","downloadUrl","questions","type","name","answers","confirm","raw","forEach","job","i","packageExtension","UrlUtils","constructBuildLogsUrl","id","hasPriorityBuilds","numberOfRemainingPriorityBuilds","hasUnlimitedPriorityBuilds","shouldShowUpgradeInfo","priority","canPurchasePriorityBuilds","status","constructTurtleStatusUrl","artifacts","url","ensureReleaseExists","ids","duringBuild","release","getLatestReleaseAsync","channel","publicationId","publishedTime","buildId","timeout","interval","spinner","start","time","Date","getTime","endTime","res","fp","compose","head","filter","getOr","succeed","text","fail","build","expIds","bundleIdentifier","opts","waitOpts","completedJob","artifactUrl","artifactId","constructArtifactUrl","green"],"mappings":"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","file":"../../../commands/build/BaseBuilder.js","sourceRoot":"/expo-cli@3.0.10/src"}