{"version":3,"sources":["../../../src/basic/Picker.ios.js"],"names":["PickerNB","nextProps","prevState","nextDS","children","Array","isArray","concat","apply","item","child","props","value","selectedValue","currentLabel","nextLabel","currentDS","dataSource","getInitialStyle","picker","pickerItem","getChildren","appliedChildren","state","modalVisible","getLabel","defaultProps","style","itemStyle","visible","setState","React","cloneElement","iosIcon","fontSize","lineHeight","onPress","enabled","undefined","_setModalVisible","text","placeholder","renderButton","selectedItem","getSelectedItem","textStyle","note","placeholderStyle","renderIcon","renderHeader","headerStyle","shadowOffset","shadowColor","shadowRadius","shadowOpacity","marginLeft","headerBackButtonStyle","headerBackButtonTextStyle","headerBackButtonText","headerTitleStyle","iosHeader","_root","c","modalStyle","index","String","onValueChange","current","label","itemTextStyle","Component","Item","render","propTypes","ViewPropTypes","PropTypes","func","StyledPickerNB","mapPropsToStyleNames"],"mappings":"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","file":"Picker.ios.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport createReactClass from 'create-react-class';\nimport { FlatList, Modal, Picker, View, ViewPropTypes } from 'react-native';\nimport { connectStyle } from 'native-base-shoutem-theme';\nimport { find, flatten, get, isArray } from 'lodash';\n\nimport computeProps from '../utils/computeProps';\nimport mapPropsToStyleNames from '../utils/mapPropsToStyleNames';\n\nimport { Text } from './Text';\nimport { Radio } from './Radio';\nimport { Container } from './Container';\nimport { ListItem } from './ListItem';\nimport { Button } from './Button';\nimport { Header } from './Header';\nimport { Title } from './Title';\nimport { Left } from './Left';\nimport { Right } from './Right';\nimport { Body } from './Body';\n\nclass PickerNB extends Component {\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let nextDS;\n\n    if (nextProps.children && !Array.isArray(nextProps.children)) {\n      nextDS = [].concat(nextProps.children);\n      // eslint-disable-next-line prefer-spread\n    } else nextDS = [].concat.apply([], nextProps.children);\n\n    let item;\n\n    if (isArray(nextProps.children)) {\n      item = find(\n        flatten(nextProps.children),\n        child => child.props.value === nextProps.selectedValue\n      );\n    } else {\n      item = nextProps.children;\n    }\n\n    const currentLabel = prevState.currentLabel;\n    const nextLabel = get(item, 'props.label');\n    const currentDS = prevState.dataSource;\n\n    if (currentLabel !== nextLabel) {\n      return {\n        currentLabel: nextLabel\n      };\n    }\n    if (currentDS !== nextDS) {\n      return {\n        dataSource: nextDS\n      };\n    }\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalVisible: false,\n      currentLabel: this.getLabel(props),\n      dataSource: this.getChildren(props.children)\n    };\n  }\n\n  getInitialStyle = () => {\n    return {\n      picker: {\n        // alignItems: 'flex-end'\n      },\n      pickerItem: {}\n    };\n  };\n\n  getLabel(props) {\n    const children = this.getChildren(props.children);\n    const item = find(\n      children,\n      child => child.props.value === props.selectedValue\n    );\n    return get(item, 'props.label');\n  }\n\n  getSelectedItem() {\n    return find(\n      this.props.children,\n      child => child.props.value === this.props.selectedValue\n    );\n  }\n\n  getChildren = children => {\n    if (children && !Array.isArray(children)) {\n      return [].concat(children);\n    }\n    // eslint-disable-next-line prefer-spread\n    const appliedChildren = [].concat.apply([], children);\n    return appliedChildren;\n  };\n\n  prepareRootProps() {\n    const defaultProps = {\n      style: this.getInitialStyle().picker,\n      itemStyle: this.getInitialStyle().pickerItem\n    };\n\n    return computeProps(this.props, defaultProps);\n  }\n\n  _setModalVisible(visible) {\n    this.setState({ modalVisible: visible });\n  }\n\n  renderIcon() {\n    return React.cloneElement(this.props.iosIcon, {\n      style: [\n        {\n          fontSize: 22,\n          lineHeight: 26\n        },\n        { ...this.props.iosIcon.props.style }\n      ]\n    });\n  }\n\n  renderButton() {\n    const onPress = () => {\n      if (this.props.enabled !== undefined && !this.props.enabled) return;\n      this._setModalVisible(true);\n    };\n    const text = this.state.currentLabel\n      ? this.state.currentLabel\n      : this.props.placeholder;\n    if (this.props.renderButton) {\n      return this.props.renderButton({\n        onPress,\n        text,\n        picker: this,\n        selectedItem: this.getSelectedItem()\n      });\n    }\n    return (\n      <Button\n        style={this.props.style}\n        dark\n        picker\n        transparent\n        onPress={onPress}\n      >\n        {this.state.currentLabel ? (\n          <Text\n            style={[this.props.textStyle]}\n            note={this.props.note}\n            numberOfLines={1}\n            ellipsizeMode=\"tail\"\n          >\n            {this.state.currentLabel}\n          </Text>\n        ) : (\n          <Text\n            style={[this.props.textStyle, this.props.placeholderStyle]}\n            note={this.props.note !== false}\n            numberOfLines={1}\n            ellipsizeMode=\"tail\"\n          >\n            {this.props.placeholder}\n          </Text>\n        )}\n        {this.props.iosIcon === undefined ? null : this.renderIcon()}\n      </Button>\n    );\n  }\n\n  renderHeader() {\n    return this.props.renderHeader ? (\n      this.props.renderHeader(() => this._setModalVisible(false))\n    ) : (\n      <Header style={this.props.headerStyle}>\n        <Left>\n          <Button\n            style={{\n              shadowOffset: null,\n              shadowColor: null,\n              shadowRadius: null,\n              shadowOpacity: null,\n              marginLeft: 3,\n              ...this.props.headerBackButtonStyle\n            }}\n            transparent\n            onPress={() => {\n              this._setModalVisible(false);\n            }}\n          >\n            <Text style={this.props.headerBackButtonTextStyle}>\n              {this.props.headerBackButtonText || 'Back'}\n            </Text>\n          </Button>\n        </Left>\n        <Body>\n          <Title style={this.props.headerTitleStyle}>\n            {this.props.iosHeader || 'Select One'}\n          </Title>\n        </Body>\n        <Right />\n      </Header>\n    );\n  }\n\n  render() {\n    return (\n      <View ref={c => (this._root = c)}>\n        {this.renderButton()}\n        <Modal\n          // supportedOrientations={this.props.supportedOrientations || null}\n          supportedOrientations={['portrait', 'landscape']}\n          animationType=\"slide\"\n          transparent={false}\n          visible={this.state.modalVisible}\n          onRequestClose={() => {\n            this._setModalVisible(false);\n          }}\n        >\n          <Container style={this.props.modalStyle}>\n            {this.renderHeader()}\n            <FlatList\n              data={this.state.dataSource}\n              keyExtractor={(item, index) => String(index)}\n              renderItem={({ item }) => (\n                <ListItem\n                  selected={item.props.value === this.props.selectedValue}\n                  button\n                  style={this.props.itemStyle}\n                  onPress={() => {\n                    this._setModalVisible(false);\n                    this.props.onValueChange(item.props.value);\n                    this.setState({ current: item.props.label });\n                  }}\n                >\n                  <Left>\n                    <Text style={this.props.itemTextStyle}>\n                      {item.props.label}\n                    </Text>\n                  </Left>\n                  <Right>\n                    {item.props.value === this.props.selectedValue ? (\n                      <Radio selected />\n                    ) : (\n                      <Radio selected={false} />\n                    )}\n                  </Right>\n                </ListItem>\n              )}\n            />\n          </Container>\n        </Modal>\n      </View>\n    );\n  }\n}\n\nPickerNB.Item = createReactClass({\n  render() {\n    return <Picker.Item {...this.props()} />;\n  }\n});\n\nPickerNB.propTypes = {\n  ...ViewPropTypes,\n  renderButton: PropTypes.func\n};\n\nconst StyledPickerNB = connectStyle(\n  'NativeBase.PickerNB',\n  {},\n  mapPropsToStyleNames\n)(PickerNB);\n\nexport { StyledPickerNB as PickerNB };\n"]}